!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.uxshot=t():e.uxshot=t()}(this,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){const{default:o}=n(1);let r,i=!1;e.exports=function({videoKey:e="ctrl+r",screenshotKey:t="ctrl+s"}={}){let n,a;o(e,function(e,t){i?d():f("video")}),o(t,async function(e,t){await f("image"),setTimeout(async()=>{const e=function(e){s.currentTime=e;var t=document.createElement("canvas");t.height=s.videoHeight,t.width=s.videoWidth,t.getContext("2d").drawImage(s,0,0,t.width,t.height);var n=new Image;return n.src=t.toDataURL(),n}(0);if("data:,"===e.src)return;d("image");const t=await fetch(e.src);u(await t.blob())},1e3)});let c=[];const s=document.createElement("video");function d(e){i&&(i=!1,n&&(n.stop(),n=null,a.getTracks().forEach(e=>e.stop()),a=null))}function l(){document.getElementById("uxshot-banner").remove()}async function u(e){let t=new FormData;t.append("mediaType",r),t.append("media",e);const n=await fetch("https://uxshot.com/upload",{body:t,method:"post"}),o=(await n.json()).data.url;try{await navigator.clipboard.writeText(o)}catch(e){}const i=document.createElement("input");i.type="text",i.setAttribute("readonly",!0),i.value=o,Object.assign(i.style,{borderRadius:"3px",outline:"none",border:"none",width:"150px",marginRight:"5px"});const a=document.createElement("button");a.innerHTML="Copy",Object.assign(a.style,{});const c=document.createElement("div");c.id="uxshot-banner",Object.assign(c.style,{position:"fixed",top:"10px",right:"10px",background:"white",borderRadius:"5px",display:"flex",alignItems:"center",fontFamily:"sans-serif",padding:"10px 15px",padding:"10px 15px",border:"1px solid #cacaca"}),a.addEventListener("click",()=>{i.select(),document.execCommand("copy"),c.remove()});const s=document.createElement("button");s.addEventListener("click",l),s.innerHTML="&times;",Object.assign(s.style,{background:"transparent",color:"white",border:"none",fontSize:"14px",marginLeft:"5px"}),c.appendChild(i),c.appendChild(a),document.body.appendChild(c)}async function f(e){const t=document.getElementById("uxshot-banner");t&&t.remove(),r=e,i=!0;try{const e=(a=await function(){if(navigator.getDisplayMedia)return navigator.getDisplayMedia({video:!0,audio:!0});if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});throw new Error("getDisplayMedia API is not supported in this browser")}()).getTracks()[0],t=e.getSettings&&e.getSettings();!t.displaySurface||t.displaySurface,s.srcObject=a,(n=new MediaRecorder(a,{mimeType:"video/webm"})).ondataavailable=function(e){void 0!==e.data&&0!==e.data.size&&c.push(e.data)},n.addEventListener("stop",()=>{const e=new Blob(c,{type:"video/webm"});"video"===r&&u(e)}),n.addEventListener("start",()=>{}),n.start(),a.addEventListener("inactive",e=>{i&&"video"===r&&d()}),a.addEventListener("active",e=>{}),a.addEventListener("addtrack",e=>{})}catch(e){console.error(e)}}s.setAttribute("autoplay",!0),document.addEventListener("DOMContentLoaded",()=>{})}},function(e,t,n){"use strict";
/*!
 * hotkeys-js v3.7.1
 * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies.
 * 
 * Copyright (c) 2019 kenny wong <wowohoo@qq.com>
 * http://jaywcjlove.github.io/hotkeys
 * 
 * Licensed under the MIT license.
 */
function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var i,a="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function c(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on".concat(t),function(){n(window.event)})}function s(e,t){for(var n=t.slice(0,t.length-1),o=0;o<n.length;o++)n[o]=e[n[o].toLowerCase()];return n}function d(e){"string"!=typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}for(var l={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,"⇪":20,",":188,".":190,"/":191,"`":192,"-":a?173:189,"=":a?61:187,";":a?59:186,"'":222,"[":219,"]":221,"\\":220},u={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":a?224:91,cmd:a?224:91,command:a?224:91},f=(r(i={16:"shiftKey",18:"altKey",17:"ctrlKey"},a?224:91,"metaKey"),r(i,"shiftKey",16),r(i,"ctrlKey",17),r(i,"altKey",18),r(i,"metaKey",91),i),p=r({16:!1,18:!1,17:!1},a?224:91,!1),y={},h=1;h<20;h++)l["f".concat(h)]=111+h;var v=[],m="all",g=[],b=function(e){return l[e.toLowerCase()]||u[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function w(e){m=e||"all"}function x(){return m||"all"}var k=function(e){var t=e.key,n=e.scope,o=e.method,r=e.splitKey,i=void 0===r?"+":r;d(t).forEach(function(e){var t=e.split(i),r=t.length,a=t[r-1],c="*"===a?"*":b(a);if(y[c]){n||(n=x());var d=r>1?s(u,t):[];y[c]=y[c].map(function(e){return(!o||e.method===o)&&e.scope===n&&function(e,t){for(var n=e.length>=t.length?e:t,o=e.length>=t.length?t:e,r=!0,i=0;i<n.length;i++)-1===o.indexOf(n[i])&&(r=!1);return r}(e.mods,d)?{}:e})}})};function O(e,t,n){var o;if(t.scope===n||"all"===t.scope){for(var r in o=t.mods.length>0,p)Object.prototype.hasOwnProperty.call(p,r)&&(!p[r]&&t.mods.indexOf(+r)>-1||p[r]&&-1===t.mods.indexOf(+r))&&(o=!1);(0!==t.mods.length||p[16]||p[18]||p[17]||p[91])&&!o&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function E(e){var t=y["*"],n=e.keyCode||e.which||e.charCode;if(j.filter.call(this,e)){if(93!==n&&224!==n||(n=91),-1===v.indexOf(n)&&229!==n&&v.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(t){var n=f[t];e[t]&&-1===v.indexOf(n)?v.push(n):!e[t]&&v.indexOf(n)>-1&&v.splice(v.indexOf(n),1)}),n in p){for(var o in p[n]=!0,u)u[o]===n&&(j[o]=!0);if(!t)return}for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&(p[r]=e[f[r]]);var i=x();if(t)for(var a=0;a<t.length;a++)t[a].scope===i&&("keydown"===e.type&&t[a].keydown||"keyup"===e.type&&t[a].keyup)&&O(e,t[a],i);if(n in y)for(var c=0;c<y[n].length;c++)if(("keydown"===e.type&&y[n][c].keydown||"keyup"===e.type&&y[n][c].keyup)&&y[n][c].key){for(var s=y[n][c],d=s.splitKey,l=s.key.split(d),h=[],m=0;m<l.length;m++)h.push(b(l[m]));h.sort().join("")===v.sort().join("")&&O(e,s,i)}}}function j(e,t,n){v=[];var o=d(e),r=[],i="all",a=document,l=0,f=!1,h=!0,m="+";for(void 0===n&&"function"==typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(i=t.scope),t.element&&(a=t.element),t.keyup&&(f=t.keyup),void 0!==t.keydown&&(h=t.keydown),"string"==typeof t.splitKey&&(m=t.splitKey)),"string"==typeof t&&(i=t);l<o.length;l++)r=[],(e=o[l].split(m)).length>1&&(r=s(u,e)),(e="*"===(e=e[e.length-1])?"*":b(e))in y||(y[e]=[]),y[e].push({keyup:f,keydown:h,scope:i,mods:r,shortcut:o[l],method:n,key:o[l],splitKey:m});void 0!==a&&!function(e){return g.indexOf(e)>-1}(a)&&window&&(g.push(a),c(a,"keydown",function(e){E(e)}),c(window,"focus",function(){v=[]}),c(a,"keyup",function(e){E(e),function(e){var t=e.keyCode||e.which||e.charCode,n=v.indexOf(t);if(n>=0&&v.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&v.splice(0,v.length),93!==t&&224!==t||(t=91),t in p)for(var o in p[t]=!1,u)u[o]===t&&(j[o]=!1)}(e)}))}var C={setScope:w,getScope:x,deleteScope:function(e,t){var n,o;for(var r in e||(e=x()),y)if(Object.prototype.hasOwnProperty.call(y,r))for(n=y[r],o=0;o<n.length;)n[o].scope===e?n.splice(o,1):o++;x()===e&&w(t||"all")},getPressedKeyCodes:function(){return v.slice(0)},isPressed:function(e){return"string"==typeof e&&(e=b(e)),-1!==v.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,n=t.tagName,o=!0;return!t.isContentEditable&&"TEXTAREA"!==n&&("INPUT"!==n&&"TEXTAREA"!==n||t.readOnly)||(o=!1),o},unbind:function(e){if(e){if(Array.isArray(e))e.forEach(function(e){e.key&&k(e)});else if("object"===o(e))e.key&&k(e);else if("string"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0],a=n[1];"function"==typeof i&&(a=i,i=""),k({key:e,scope:i,method:a,splitKey:"+"})}}else Object.keys(y).forEach(function(e){return delete y[e]})}};for(var K in C)Object.prototype.hasOwnProperty.call(C,K)&&(j[K]=C[K]);if("undefined"!=typeof window){var L=window.hotkeys;j.noConflict=function(e){return e&&window.hotkeys===j&&(window.hotkeys=L),j},window.hotkeys=j}t.default=j}])});