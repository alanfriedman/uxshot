!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("hotkeys-js")):"function"==typeof define&&define.amd?define(["hotkeys-js"],t):"object"==typeof exports?exports.uxshot=t(require("hotkeys-js")):e.uxshot=t(e["hotkeys-js"])}(this,function(e){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){const{default:o}=n(1);let i,a=!1;e.exports=function({videoKey:e="ctrl+r",screenshotKey:t="ctrl+s",description:n}={}){let r,d;o(e,function(e,t){a?u():f("video")}),o(t,async function(e,t){await f("image"),setTimeout(async()=>{const e=function(e){s.currentTime=e;var t=document.createElement("canvas");t.height=s.videoHeight,t.width=s.videoWidth,t.getContext("2d").drawImage(s,0,0,t.width,t.height);var n=new Image;return n.src=t.toDataURL(),n}(0);if("data:,"===e.src)return;u("image");const t=await fetch(e.src);l(await t.blob())},1e3)});let c=[];const s=document.createElement("video");function u(e){a&&(a=!1,r&&(r.stop(),r=null,d.getTracks().forEach(e=>e.stop()),d=null,c=[]))}function p(){document.getElementById("uxshot-banner").remove()}async function l(e){let t,o=new FormData;o.append("mediaType",i),o.append("media",e),n&&(t=await n(),o.append("description",t));const a=await fetch("https://uxshot.com/upload",{body:o,method:"post"}),r=(await a.json()).data.url;try{await navigator.clipboard.writeText(r)}catch(e){}const d=document.createElement("input");d.type="text",d.setAttribute("readonly",!0),d.value=r,Object.assign(d.style,{borderRadius:"3px",outline:"none",border:"none",width:"150px",marginRight:"5px"});const c=document.createElement("button");c.innerHTML="Copy",Object.assign(c.style,{});const s=document.createElement("div");s.id="uxshot-banner",Object.assign(s.style,{position:"fixed",top:"10px",right:"10px",background:"white",borderRadius:"5px",display:"flex",alignItems:"center",fontFamily:"sans-serif",padding:"10px 15px",padding:"10px 15px",border:"1px solid #cacaca"}),c.addEventListener("click",()=>{d.select(),document.execCommand("copy"),s.remove()});const u=document.createElement("button");u.addEventListener("click",p),u.innerHTML="&times;",Object.assign(u.style,{background:"transparent",color:"white",border:"none",fontSize:"14px",marginLeft:"5px"}),s.appendChild(d),s.appendChild(c),document.body.appendChild(s)}async function f(e){const t=document.getElementById("uxshot-banner");t&&t.remove(),i=e,a=!0;try{const e=(d=await function(){if(navigator.getDisplayMedia)return navigator.getDisplayMedia({video:!0,audio:!0});if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});throw new Error("getDisplayMedia API is not supported in this browser")}()).getTracks()[0],t=e.getSettings&&e.getSettings();!t.displaySurface||t.displaySurface,s.srcObject=d,(r=new MediaRecorder(d,{mimeType:"video/webm; codecs=vp8"})).ondataavailable=function(e){void 0!==e.data&&0!==e.data.size&&c.push(e.data)},r.addEventListener("stop",()=>{const e=new Blob(c,{type:"video/webm"});"video"===i&&l(e)}),r.addEventListener("start",()=>{}),r.start(),d.addEventListener("inactive",e=>{a&&"video"===i&&u()}),d.addEventListener("active",e=>{}),d.addEventListener("addtrack",e=>{})}catch(e){console.error(e)}}s.setAttribute("autoplay",!0),document.addEventListener("DOMContentLoaded",()=>{})}},function(t,n){t.exports=e}])});