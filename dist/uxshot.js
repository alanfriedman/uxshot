!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("hotkeys-js")):"function"==typeof define&&define.amd?define(["hotkeys-js"],t):"object"==typeof exports?exports.uxshot=t(require("hotkeys-js")):e.uxshot=t(e["hotkeys-js"])}(this,function(e){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var o;e.exports=(o=n(1),function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){const{default:o}=n(1);let r,i=!1;e.exports=function({videoKey:e="ctrl+r",screenshotKey:t="ctrl+s",description:n}={}){let a,d;o(e,function(e,t){i?s():f("video")}),o(t,async function(e,t){await f("image"),setTimeout(async()=>{const e=function(e){u.currentTime=0;var t=document.createElement("canvas");t.height=u.videoHeight,t.width=u.videoWidth,t.getContext("2d").drawImage(u,0,0,t.width,t.height);var n=new Image;return n.src=t.toDataURL(),n}();if("data:,"===e.src)return;s();const t=await fetch(e.src);p(await t.blob())},1e3)});let c=[];const u=document.createElement("video");function s(e){i&&(i=!1,a&&(a.stop(),a=null,d.getTracks().forEach(e=>e.stop()),d=null,c=[]))}function l(){document.getElementById("uxshot-banner").remove()}async function p(e){let t,o=new FormData;o.append("mediaType",r),o.append("media",e),n&&(t=await n(),o.append("description",t));const i=await fetch("https://uxshot.com/upload",{body:o,method:"post"}),a=(await i.json()).data.url;try{await navigator.clipboard.writeText(a)}catch(e){}const d=document.createElement("input");d.type="text",d.setAttribute("readonly",!0),d.value=a,Object.assign(d.style,{borderRadius:"3px",outline:"none",border:"none",width:"150px",marginRight:"5px"});const c=document.createElement("button");c.innerHTML="Copy",Object.assign(c.style,{});const u=document.createElement("div");u.id="uxshot-banner",Object.assign(u.style,{position:"fixed",top:"10px",right:"10px",background:"white",borderRadius:"5px",display:"flex",alignItems:"center",fontFamily:"sans-serif",padding:"10px 15px",padding:"10px 15px",border:"1px solid #cacaca"}),c.addEventListener("click",()=>{d.select(),document.execCommand("copy"),u.remove()});const s=document.createElement("button");s.addEventListener("click",l),s.innerHTML="&times;",Object.assign(s.style,{background:"transparent",color:"white",border:"none",fontSize:"14px",marginLeft:"5px"}),u.appendChild(d),u.appendChild(c),document.body.appendChild(u)}async function f(e){const t=document.getElementById("uxshot-banner");t&&t.remove(),r=e,i=!0;try{const t=(d=await function(){if(navigator.getDisplayMedia)return navigator.getDisplayMedia({video:!0,audio:!0});if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});throw new Error("getDisplayMedia API is not supported in this browser")}()).getTracks()[0],n=t.getSettings&&t.getSettings();!n.displaySurface||n.displaySurface,u.srcObject=d,(a=new MediaRecorder(d,{mimeType:"video/webm; codecs=vp8"})).ondataavailable=function(e){void 0!==e.data&&0!==e.data.size&&c.push(e.data)},a.addEventListener("stop",()=>{const e=new Blob(c,{type:"video/webm"});"video"===r&&p(e)}),a.addEventListener("start",()=>{}),a.start(),d.addEventListener("inactive",e=>{i&&"video"===r&&s()}),d.addEventListener("active",e=>{}),d.addEventListener("addtrack",e=>{})}catch(e){console.error(e)}}u.setAttribute("autoplay",!0),document.addEventListener("DOMContentLoaded",()=>{})}},function(e,t){e.exports=o}]))},function(t,n){t.exports=e}])});